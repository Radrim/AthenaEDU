@page "/"

@using System.ComponentModel.DataAnnotations;
@inject CourseService courseService

<MudGrid Justify="Justify.SpaceAround" Class="mud-theme-dark" Style="display: flex; align-items: center;">
    <MudItem xs="4">
        <MudPaper Class="mud-theme-secondary" Elevation="4">
            <MudTextField T="string" Label="Search" Class="object-fill px-3" AdornmentIcon="@Icons.Material.Filled.Search" AdornmentColor="Color.Primary"></MudTextField>
        </MudPaper>
    </MudItem>
    <MudItem xs="4">
            <MudSelect T="string" Label="Фильтрация по категории:" AnchorOrigin="Origin.BottomRight" TransformOrigin="Origin.BottomRight"
                   Variant="Variant.Filled" AdornmentColor="Color.Primary" Class="mud-theme-secondary">
                <MudSelectItem Value="@("IT")" />
                <MudSelectItem Value="@("Бизнес и менеджемент")" />
                <MudSelectItem Value="@("Технологии и инновации")" />
            </MudSelect>
    </MudItem>
</MudGrid>

<MudGrid Spacing="5" Class="mt-5 d-flex align-content-start" Justify="Justify.FlexStart" Style="height: 90vh; width: 100vw;">
    @foreach(Course course in Courses)
    {
        courseName = course.Name;
        string path = "/courseMainPage/" + courseName;
        <MudItem xs="3" >
            <MudNavLink Href="@path">
            <MudCard>
                <MudCardContent>
                    <MudImage Src="/Svet.jpg" Fluid="true"/>
                    <MudText Typo="Typo.h5">@course.Name</MudText>
                    <MudText Typo="Typo.body2">@course.Description</MudText>
                </MudCardContent>
            </MudCard>
            </MudNavLink>
        </MudItem>
    }
</MudGrid>

@code {
    private string courseName;
    List<Course> Courses = new List<Course>();

    protected override async Task OnInitializedAsync()
    {
        await FillCourses();
    }

    private async Task FillCourses()
    {
        Courses = await courseService.GetAllCourses();
    }
}
